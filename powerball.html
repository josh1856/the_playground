<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"/>
<title>Powerball Picker ‚Äî Pure Odds & EV-Optimized</title>
<style>
  :root{--bg:#0b0f14;--panel:#101722;--ink:#e6edf3;--muted:#9aa4b2;--acc:#5ac8fa;--ok:#30d158}
  *{box-sizing:border-box} html,body{margin:0;background:var(--bg);color:var(--ink);font:16px/1.4 system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial}
  .wrap{max-width:800px;margin:0 auto;padding:18px}
  h1{margin:0 0 8px} .sub{color:var(--muted)}
  .card{background:var(--panel);border:1px solid #263247;border-radius:14px;padding:14px;margin:12px 0}
  .row{display:flex;gap:10px;flex-wrap:wrap;align-items:center}
  button{background:#0f1522;border:1px solid #263247;color:var(--ink);padding:10px 12px;border-radius:12px;cursor:pointer}
  button.primary{border-color:var(--acc)}
  .numbers{display:flex;gap:10px;flex-wrap:wrap;align-items:center;margin-top:10px}
  .ball{width:44px;height:44px;border-radius:50%;display:grid;place-items:center;font-weight:700;background:#0f1522;border:1px solid #263247}
  .pb{background:#2a0f13;border-color:#6b1d27}
  .line{display:flex;gap:8px;align-items:center}
  .pill{display:inline-flex;gap:6px;align-items:center;padding:6px 10px;border-radius:999px;background:#0d1421;border:1px solid #1f2a3b;color:#c7d2de}
  a{color:#9aa4b2;text-decoration:none}
  .small{font-size:13px;color:#9aa4b2}
</style>
</head>
<body>
<div class="wrap">
  <h1>üéØ Powerball Picker</h1>
  <p class="sub">Two generators: <b>Pure Odds</b> (uniform random) and <b>EV-Optimized</b> (avoid common human picks to reduce jackpot splits). RNG uses <code>crypto.getRandomValues</code>.</p>

  <div class="card">
    <div class="row" style="justify-content:space-between">
      <div class="pill">Field: 5 √ó 1‚Äì69 &nbsp;‚Ä¢&nbsp; Powerball: 1‚Äì26</div>
      <a href="index.html">‚üµ Home</a>
    </div>
    <div class="row" style="gap:8px;margin-top:8px">
      <button id="pure" class="primary">üé≤ Generate ‚Äî Pure Odds</button>
      <button id="ev">ü§ù Generate ‚Äî EV-Optimized</button>
      <button id="again">‚Ü∫ Again</button>
    </div>
    <div style="margin-top:10px" class="small">Tip: Buying more tickets increases your chance; number choices do not. ‚ÄúOptimized‚Äù aims to avoid <i>popular</i> picks (birthdays, sequences, recent repeats) to <u>reduce the chance of sharing</u> if you win.</div>
    <div id="out" class="numbers"></div>
  </div>

  <div class="card">
    <div class="line" style="justify-content:space-between">
      <strong>Latest 3 drawings</strong>
      <span class="pill">Source: official/state lottery</span>
    </div>
    <div id="recent" class="numbers"></div>
    <div class="small">Oct 1, 2025; Sep 29, 2025; Sep 27, 2025 (VA & IA lottery result pages)</div>
  </div>

  <div class="card small">
    <b>How this works</b>
    <ul>
      <li><b>Pure Odds:</b> sample 5 unique numbers 1‚Äì69 uniformly + PB 1‚Äì26.</li>
      <li><b>EV-Optimized:</b> sample from full range but <i>downweight</i> 1‚Äì31 (birthdays), avoid straight sequences (‚Ä¶1,2,3,4,5‚Ä¶), avoid repeating a ball from the last 3 draws unless needed, and nudge toward 32‚Äì69. Powerball 1‚Äì26 is uniform (little evidence of crowding there).</li>
    </ul>
  </div>

  <p class="small">Play responsibly. Odds of jackpot ‚âà 1 in 292,201,338; no strategy changes the draw‚Äôs physics‚Äîthis only aims to reduce the chance of splitting a jackpot with others.</p>
</div>

<script>
(function(){
  "use strict";
  function r01(){const u=new Uint32Array(1); crypto.getRandomValues(u); return u[0]/4294967296;}
  function pickUnique(n, min, max, weightFn){
    const set=new Set(); const tries=max*4;
    let guard=0;
    while(set.size<n && guard<tries){
      let x=min+Math.floor(r01()*(max-min+1));
      // rejection sampling with weight
      const w = Math.max(0.0001, (weightFn?weightFn(x):1));
      if(r01() < w) set.add(x);
      guard++;
    }
    // if we somehow didn‚Äôt fill (extremely rare), fill uniformly
    while(set.size<n){ set.add(min+Math.floor(r01()*(max-min+1))); }
    return Array.from(set).sort((a,b)=>a-b);
  }
  function ballsRow(arr, pb){
    const wrap=document.createElement('div'); wrap.className='numbers';
    arr.forEach(n=>{ const b=document.createElement('div'); b.className='ball'; b.textContent=n; wrap.appendChild(b); });
    const p=document.createElement('div'); p.className='ball pb'; p.textContent=pb; wrap.appendChild(p);
    return wrap;
  }

  // recent 3 draws (from VA & IA lottery pages)
  const recent = [
    {d:'2025-10-01', nums:[8,17,22,28,55], pb:14},
    {d:'2025-09-29', nums:[1,3,27,60,65], pb:16},
    {d:'2025-09-27', nums:[10,16,32,61,66], pb:4}
  ];
  const recentDiv=document.getElementById('recent');
  recent.forEach(r=> recentDiv.appendChild(ballsRow(r.nums, r.pb)));

  const out=document.getElementById('out');
  function render(nums, pb){
    out.innerHTML=''; out.appendChild(ballsRow(nums,pb));
  }

  // weights for EV-Optimized (heuristics to dodge popular picks)
  function evWeightFactory(){
    const recentSet=new Set(recent.flatMap(r=>r.nums));
    return function w(x){
      let w=1;
      if(x<=31) w*=0.55;               // birthdays over-picked ‚Üí downweight
      if(recentSet.has(x)) w*=0.5;     // avoid repeating very recent balls
      // avoid very low sequence area a bit more
      if(x<=10) w*=0.85;
      // gently nudge top half
      if(x>=40) w*=1.15;
      return Math.max(0.15, Math.min(1.0, w)); // clamp
    }
  }

  function purePick(){
    const nums = pickUnique(5,1,69);
    const pb   = 1+Math.floor(r01()*26);
    render(nums, pb);
  }
  function evPick(){
    const w = evWeightFactory();
    // first pick with weights, then quick anti-sequence pass
    let nums = pickUnique(5,1,69,w);
    // if the numbers form long consecutive runs, reshuffle one
    nums.sort((a,b)=>a-b);
    for(let i=0;i<nums.length-2;i++){
      if(nums[i]+1===nums[i+1] && nums[i+1]+1===nums[i+2]){ // 3-run
        // replace middle with a higher, less-common-ish band
        let x = 32 + Math.floor(r01()*(69-32+1));
        while(nums.includes(x)) x = 32 + Math.floor(r01()*(69-32+1));
        nums[i+1]=x; nums.sort((a,b)=>a-b);
      }
    }
    const pb = 1+Math.floor(r01()*26); // PB uniform
    render(nums, pb);
  }

  document.getElementById('pure').onclick = purePick;
  document.getElementById('ev').onclick   = evPick;
  document.getElementById('again').onclick= function(){
    // repeat last mode if possible, else pure
    const last = out.querySelectorAll('.ball').length ? (window.lastMode||'pure') : 'pure';
    (last==='ev'?evPick:purePick)();
  };
  // remember last mode
  ['pure','ev'].forEach(id=>{
    document.getElementById(id).addEventListener('click',()=>window.lastMode=id);
  });

  // first run so page isn‚Äôt blank
  purePick();
})();
</script>
</body>
</html>